<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RPS - Ultimate Edition 2.0</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css" />
</head>

<body>

    <div id="toast-container"></div>

    <button id="mode-toggle" class="mode-toggle">â˜€ï¸</button>

    <audio id="sound-click" src="https://www.soundjay.com/buttons/sounds/button-16.mp3" preload="auto"></audio>
    <audio id="sound-win" src="https://www.soundjay.com/human/sounds/applause-01.mp3" preload="auto"></audio>
    <audio id="sound-lose" src="https://www.soundjay.com/misc/sounds/fail-trombone-01.mp3" preload="auto"></audio>
    <audio id="sound-tie" src="https://www.soundjay.com/buttons/sounds/button-10.mp3" preload="auto"></audio>

    <div id="stats-box" class="stats-box" style="display:none;">
        <h3>ğŸ“Š Session Stats</h3>
        <p>Rounds Played: <span id="rounds-played">0</span></p>
        <div class="stat-group">
            <h4><span id="p1-stats-label">Player 1</span></h4>
            <p>Win Rate: <span id="p1-win-rate">0.0%</span></p>
            <p>Longest Streak: <span id="p1-longest-streak">0</span></p>
        </div>
        <div class="stat-group">
            <h4><span id="p2-stats-label">Player 2</span></h4>
            <p>Win Rate: <span id="p2-win-rate">0.0%</span></p>
            <p>Longest Streak: <span id="p2-longest-streak">0</span></p>
        </div>
    </div>
    <div class="modal" id="winner-modal" style="display:none;">
        <div class="modal-content winner-content">
            <h2 id="final-winner-message"></h2>
            <button id="play-again-btn" class="clickable">Play New Series</button>
            <button class="reset-btn clickable" id="exit-from-winner">Exit to Menu</button>
        </div>
    </div>

    <div class="modal" id="name-modal">
        <div class="modal-content">
            <h2>Welcome!</h2>
            <p>Enter your name and pick an avatar:</p>
            <input type="text" id="username-input" placeholder="Your Name" maxlength="20" />
            <div class="avatar-picker">
                <span class="avatar-choice selected" data-avatar="ğŸ§‘">ğŸ§‘</span>
                <span class="avatar-choice" data-avatar="ğŸ¦¸">ğŸ¦¸</span>
                <span class="avatar-choice" data-avatar="ğŸ§‘â€ğŸš€">ğŸ§‘â€ğŸš€</span>
                <span class="avatar-choice" data-avatar="ğŸ¤–">ğŸ¤–</span>
                <span class="avatar-choice" data-avatar="ğŸ‘»">ğŸ‘»</span>
                <span class="avatar-choice" data-avatar="ğŸ‘½">ğŸ‘½</span>
            </div>
            <button id="play-btn" class="clickable">Let's Play</button>
        </div>
    </div>

    <div class="modal" id="mode-modal" style="display:none;">
        <div class="modal-content">
            <div id="profile-display" class="profile-display">
                <span id="profile-avatar" class="profile-avatar">ğŸ§‘</span>
                <h3 id="profile-username">Player Name</h3>
            </div>
            <h2>Who do you want to play with?</h2>
            <button id="friend-btn" class="clickable" disabled style="opacity:0.5; cursor:not-allowed;"
                title="Multiplayer coming soon to web version">Friend (Coming Soon)</button>
            <button id="computer-btn" class="clickable">Computer (Smarter AI)</button>
            <button id="change-name-btn" class="clickable">Change Name</button>
        </div>
    </div>

    <div class="modal" id="series-modal" style="display:none;">
        <div class="modal-content">
            <h2>Select Series Length</h2>
            <p>First player to win...</p>
            <button id="series-3-btn" class="clickable series-btn" data-length="3">Best of 3 (2 Wins)</button>
            <button id="series-5-btn" class="clickable series-btn" data-length="5">Best of 5 (3 Wins)</button>
            <button id="series-7-btn" class="clickable series-btn" data-length="7">Best of 7 (4 Wins)</button>
            <button id="series-0-btn" class="clickable series-btn" data-length="0">Unlimited</button>
            <button class="back-btn clickable" data-target="mode-modal">Back</button>
        </div>
    </div>

    <div class="modal" id="friend-modal" style="display:none;">
        <div class="modal-content">
            <h2>Play with a Friend</h2>
            <button id="create-room-btn" class="clickable">Create Room</button>
            <button id="join-room-btn" class="clickable">Join Room</button>
            <button class="back-btn clickable" data-target="mode-modal">Back</button>
        </div>
    </div>

    <div class="modal" id="join-room-modal" style="display:none;">
        <div class="modal-content">
            <h2>Join Room</h2>
            <input type="text" id="room-code-input" placeholder="Enter 4-Digit Code" maxlength="4"
                style="text-transform: uppercase;" />
            <button id="submit-join-room-btn" class="clickable">Join</button>
            <button class="back-btn clickable" data-target="friend-modal">Back</button>
        </div>
    </div>

    <div class="modal" id="waiting-modal" style="display:none;">
        <div class="modal-content">
            <h2>Waiting for Friend...</h2>
            <p>Share this code with your friend:</p>
            <h1 id="room-code-display" style="font-size: 3rem; color: #ffaf7b; letter-spacing: 5px;">----</h1>
            <p>Waiting for Player 2 to join.</p>
            <button class="back-btn clickable" data-target="friend-modal">Cancel</button>
        </div>
    </div>

    <div class="container" id="game-container" style="display:none;">
        <button id="reset-btn-top" class="clickable">Exit Game</button>
        <h1>
            <span class="title-rock">Rock</span>
            <span class="title-paper">Paper</span>
            <span class="title-scissors">Scissors</span>
        </h1>
        <div class="series-score">
            Series Target: <span id="series-target-display">Unlimited</span><br>
            <strong id="player1-series-label">P1 Wins:</strong> <span id="player1-series-score">0</span>
            <strong id="player2-series-label">P2 Wins:</strong> <span id="player2-series-score">0</span>
        </div>

        <div class="scoreboard">
            <div>
                <span id="player1-avatar" class="score-avatar">ğŸ§‘</span>
                <strong id="player1-label">Player 1</strong>: <span id="player1-score">0</span>
            </div>
            <div>
                <span id="player2-avatar" class="score-avatar">ğŸ§‘â€ğŸ’»</span>
                <strong id="player2-label">Player 2</strong>: <span id="player2-score">0</span>
            </div>
            <div><strong>Ties:</strong> <span id="ties">0</span></div>
        </div>

        <div class="hands">
            <div class="hand" id="player1-hand">â”</div>
            <div class="hand" id="player2-hand">â”</div>
        </div>

        <div class="message" id="message">Make your move!</div>

        <div class="choices" id="choices-container">
            <button class="choice-btn clickable" data-choice="rock">âœŠ</button>
            <button class="choice-btn clickable" data-choice="paper">ğŸ–ï¸</button>
            <button class="choice-btn clickable" data-choice="scissors">âœŒï¸</button>
        </div>

        <div id="chat-box-container" class="chat-box-container" style="display:none;">
            <h3>Game Chat</h3>
            <div class="chat-messages" id="chat-messages">
            </div>
            <div class="chat-input-area">
                <input type="text" id="chat-input" placeholder="Say something..." maxlength="200" />
                <button id="send-chat-btn" class="clickable" aria-label="Send Message">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2 0.01 7z" />
                    </svg>
                </button>
            </div>
        </div>

        <button id="reset-btn" class="clickable">Reset Round Scores</button>

        <div class="history-container">
            <h2>Round History</h2>
            <ul id="history-list"></ul>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>